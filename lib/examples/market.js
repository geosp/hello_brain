"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.market = void 0;

var _fp = _interopRequireDefault(require("lodash/fp"));

var _brain = _interopRequireDefault(require("brain.js"));

var _train = require("../core/train");

var _market = require("../util/market");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var market = function market() {
  var marketDataPreprocessor = function marketDataPreprocessor(data) {
    return _fp["default"].flow(_market.getExtremes, (0, _market.normalizeMarketData)(data), _fp["default"].chunk(5))(data);
  };

  var neuroMarket = new _brain["default"].recurrent.LSTMTimeStep();
  neuroMarket.fromJSON((0, _train.train)({
    brainType: _brain["default"].recurrent.LSTMTimeStep,
    name: 'market',
    retrain: false,
    options: {
      hiddenLayers: [8, 8],
      inputSize: 4,
      outputSize: 4
    },
    trainingOptions: {
      learningRate: 0.005,
      errorThresh: 0.02
    },
    prepocessor: marketDataPreprocessor
  }));
  var marketInput = [{
    open: 0.6143595883694769,
    high: 0.7425657752134043,
    low: 0.5876882425193283,
    close: 0.6789736073408139
  }];
  console.log({
    marketInput: marketInput,
    marketOutput: neuroMarket.run(marketInput)
  });
};

exports.market = market;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leGFtcGxlcy9tYXJrZXQudHMiXSwibmFtZXMiOlsibWFya2V0IiwibWFya2V0RGF0YVByZXByb2Nlc3NvciIsImRhdGEiLCJfIiwiZmxvdyIsImdldEV4dHJlbWVzIiwiY2h1bmsiLCJuZXVyb01hcmtldCIsImJyYWluIiwicmVjdXJyZW50IiwiTFNUTVRpbWVTdGVwIiwiZnJvbUpTT04iLCJicmFpblR5cGUiLCJuYW1lIiwicmV0cmFpbiIsIm9wdGlvbnMiLCJoaWRkZW5MYXllcnMiLCJpbnB1dFNpemUiLCJvdXRwdXRTaXplIiwidHJhaW5pbmdPcHRpb25zIiwibGVhcm5pbmdSYXRlIiwiZXJyb3JUaHJlc2giLCJwcmVwb2Nlc3NvciIsIm1hcmtldElucHV0Iiwib3BlbiIsImhpZ2giLCJsb3ciLCJjbG9zZSIsImNvbnNvbGUiLCJsb2ciLCJtYXJrZXRPdXRwdXQiLCJydW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQU1PLElBQUlBLE1BQU0sR0FBRyxTQUFUQSxNQUFTLEdBQU07QUFDeEIsTUFBTUMsc0JBQXNCLEdBQUcsU0FBekJBLHNCQUF5QixDQUFBQyxJQUFJO0FBQUEsV0FDakNDLGVBQUVDLElBQUYsQ0FDRUMsbUJBREYsRUFFRSxpQ0FBb0JILElBQXBCLENBRkYsRUFHRUMsZUFBRUcsS0FBRixDQUFRLENBQVIsQ0FIRixFQUlFSixJQUpGLENBRGlDO0FBQUEsR0FBbkM7O0FBTUEsTUFBSUssV0FBVyxHQUFHLElBQUlDLGtCQUFNQyxTQUFOLENBQWdCQyxZQUFwQixFQUFsQjtBQUNBSCxFQUFBQSxXQUFXLENBQUNJLFFBQVosQ0FDRSxrQkFBTTtBQUNKQyxJQUFBQSxTQUFTLEVBQUVKLGtCQUFNQyxTQUFOLENBQWdCQyxZQUR2QjtBQUVKRyxJQUFBQSxJQUFJLEVBQUUsUUFGRjtBQUdKQyxJQUFBQSxPQUFPLEVBQUUsS0FITDtBQUlKQyxJQUFBQSxPQUFPLEVBQUU7QUFBRUMsTUFBQUEsWUFBWSxFQUFFLENBQUMsQ0FBRCxFQUFJLENBQUosQ0FBaEI7QUFBd0JDLE1BQUFBLFNBQVMsRUFBRSxDQUFuQztBQUFzQ0MsTUFBQUEsVUFBVSxFQUFFO0FBQWxELEtBSkw7QUFLSkMsSUFBQUEsZUFBZSxFQUFFO0FBQUVDLE1BQUFBLFlBQVksRUFBRSxLQUFoQjtBQUF1QkMsTUFBQUEsV0FBVyxFQUFFO0FBQXBDLEtBTGI7QUFNSkMsSUFBQUEsV0FBVyxFQUFFckI7QUFOVCxHQUFOLENBREY7QUFVQSxNQUFJc0IsV0FBVyxHQUFHLENBQUM7QUFDakJDLElBQUFBLElBQUksRUFBRSxrQkFEVztBQUVqQkMsSUFBQUEsSUFBSSxFQUFFLGtCQUZXO0FBR2pCQyxJQUFBQSxHQUFHLEVBQUUsa0JBSFk7QUFJakJDLElBQUFBLEtBQUssRUFBRTtBQUpVLEdBQUQsQ0FBbEI7QUFPQUMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFBRU4sSUFBQUEsV0FBVyxFQUFYQSxXQUFGO0FBQWVPLElBQUFBLFlBQVksRUFBRXZCLFdBQVcsQ0FBQ3dCLEdBQVosQ0FBZ0JSLFdBQWhCO0FBQTdCLEdBQVo7QUFDRCxDQTFCTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaC9mcCdcbmltcG9ydCBicmFpbiBmcm9tICdicmFpbi5qcydcbmltcG9ydCB7IHRyYWluIH0gZnJvbSAnLi4vY29yZS90cmFpbidcbmltcG9ydCB7XG4gIGdldEV4dHJlbWVzLFxuICBub3JtYWxpemVNYXJrZXREYXRhLFxuICBkZW5vcm1hbGl6ZU1hcmtldERhdGEsXG59IGZyb20gJy4uL3V0aWwvbWFya2V0J1xuXG5leHBvcnQgbGV0IG1hcmtldCA9ICgpID0+IHtcbiAgY29uc3QgbWFya2V0RGF0YVByZXByb2Nlc3NvciA9IGRhdGEgPT5cbiAgICBfLmZsb3coXG4gICAgICBnZXRFeHRyZW1lcyxcbiAgICAgIG5vcm1hbGl6ZU1hcmtldERhdGEoZGF0YSksXG4gICAgICBfLmNodW5rKDUpXG4gICAgKShkYXRhKVxuICBsZXQgbmV1cm9NYXJrZXQgPSBuZXcgYnJhaW4ucmVjdXJyZW50LkxTVE1UaW1lU3RlcCgpXG4gIG5ldXJvTWFya2V0LmZyb21KU09OKFxuICAgIHRyYWluKHtcbiAgICAgIGJyYWluVHlwZTogYnJhaW4ucmVjdXJyZW50LkxTVE1UaW1lU3RlcCxcbiAgICAgIG5hbWU6ICdtYXJrZXQnLFxuICAgICAgcmV0cmFpbjogZmFsc2UsXG4gICAgICBvcHRpb25zOiB7IGhpZGRlbkxheWVyczogWzgsIDhdLCBpbnB1dFNpemU6IDQsIG91dHB1dFNpemU6IDQgfSxcbiAgICAgIHRyYWluaW5nT3B0aW9uczogeyBsZWFybmluZ1JhdGU6IDAuMDA1LCBlcnJvclRocmVzaDogMC4wMiB9LFxuICAgICAgcHJlcG9jZXNzb3I6IG1hcmtldERhdGFQcmVwcm9jZXNzb3IsXG4gICAgfSlcbiAgKVxuICBsZXQgbWFya2V0SW5wdXQgPSBbe1xuICAgIG9wZW46IDAuNjE0MzU5NTg4MzY5NDc2OSxcbiAgICBoaWdoOiAwLjc0MjU2NTc3NTIxMzQwNDMsXG4gICAgbG93OiAwLjU4NzY4ODI0MjUxOTMyODMsXG4gICAgY2xvc2U6IDAuNjc4OTczNjA3MzQwODEzOSxcbiAgfV1cblxuICBjb25zb2xlLmxvZyh7IG1hcmtldElucHV0LCBtYXJrZXRPdXRwdXQ6IG5ldXJvTWFya2V0LnJ1bihtYXJrZXRJbnB1dCkgfSlcbn1cbiJdfQ==